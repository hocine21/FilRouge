<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Inclure Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        .icon-container a {
            font-size: 1.2em; /* Réduit la taille des icônes */
            color: orange; /* Définit la couleur des icônes en orange */
            position: relative; /* Position relative pour le badge */
            display: inline-block; /* Assure que l'icône et le badge sont bien alignés */
        }
        .icon-container .badge {
            color: orange; /* Définit la couleur du texte du badge en orange */
            background-color: white; /* Couleur de fond blanche pour contraster avec le texte orange */
        }
        .icon-container .cart-link .fa-shopping-cart {
            color: orange; /* Définit la couleur de l'icône du panier en orange */
        }
        .icon-container .wishlist-link .fa-star {
            color: orange; /* Définit la couleur de l'icône de l'étoile en orange */
        }
        .badge {
            position: absolute;
            top: -10px; /* Place le badge un peu au-dessus de l'icône */
            right: -10px; /* Place le badge un peu à droite de l'icône */
            background-color: white; /* Couleur de fond blanche pour le badge */
            color: orange; /* Couleur du texte du badge en orange */
            border-radius: 50%;
            padding: 3px 6px; /* Réduit le padding pour rendre le badge plus petit */
            font-size: 0.75em; /* Taille de la police plus petite */
            font-weight: bold;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.2); /* Ombre portée discrète */
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 20px; /* Largeur minimale pour le badge */
            height: 20px; /* Hauteur du badge */
        }
        .icon-container .cart-link {
            position: relative; /* Assure que le badge est positionné par rapport à l'icône du panier */
            padding-bottom: 10px; /* Espace supplémentaire pour éviter que le badge ne soit trop proche de l'icône */
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <a href="{{ path('app_index') }}">
                <h1 id="header-title">COUP'ACIER</h1>
            </a>
            <!-- Icône de menu pour mobile -->
            <i class="fas fa-bars menu-icon" id="icone" onclick="toggleMenu()"></i>
            <!-- Icône supplémentaire -->
            <nav id="main-nav">
                <ul>
                    <li><a href="{{ path('app_index') }}">Accueil</a></li>
                    <li><a href="{{ path('app_produits') }}">Produits</a></li>
                    <li><a href="#">Contact</a></li>
                    {% if is_granted('ROLE_PROFESSIONNEL') %}
                        <li>Devis</li>
                    {% endif %}
                    {% if is_granted('ROLE_PARTICULIER') %}
                        <li>Facture</li>
                    {% endif %}
                </ul>
            </nav>
            <div class="icon-container" id="icon-container">
                {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                    <a href="#" class="wishlist-link"><i class="fas fa-star"></i></a>
                    <a href="{{ path('app_panier') }}" class="cart-link">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="badge" id="cart-count">0</span>
                    </a>
                    <a href="{{ path('app_logout') }}" class="connect-link"><i class="fas fa-sign-out-alt"></i></a>
                {% else %}
                    <a href="{{ path('app_connexion_web') }}" class="connect-link"><i class="fas fa-user"></i></a>
                {% endif %}
            </div>
        </div>
    </header>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Fonction pour mettre à jour le badge du panier
            function updateCartCount() {
                var cart = JSON.parse(localStorage.getItem('cart')) || [];
                var cartCount = cart.length;
                var cartCountElement = document.getElementById('cart-count');
                if (cartCount > 0) {
                    cartCountElement.textContent = cartCount;
                    cartCountElement.style.display = 'flex'; // Afficher le badge
                } else {
                    cartCountElement.style.display = 'none'; // Cacher le badge s'il est vide
                }
            }

            // Appel initial pour mettre à jour le compte du panier au chargement
            updateCartCount();

            // Si vous ajoutez des articles au panier via JavaScript ailleurs, vous pouvez appeler updateCartCount() après chaque ajout
        });
    </script>
</body>
</html>
